# Compiler

我们在必看的文档中故意忽略了很多编译器相关的细节，除了 VSCode 外使用 IDE 自带的编译器就足够了。我们下面也只是简单介绍一下不同的编译器。

编译器是读入某种语言的源程序并输出二进制文件的一种软件；C++ 标准只是由各方协商提供的一个规定，而具体的实现是由编译器厂商完成的。目前最重要的三个 C++ 编译器是：

- msvc（Microsoft Visual C++）：微软提供的 C 和 C++ 编译器，作为 Visual Studio 集成开发环境的一部分。MSVC 专为 Windows 平台设计，提供了丰富的库和工具，以及与 Windows 操作系统和其他微软技术的紧密集成。

- gcc/g++（GNU compiler for C/C++）是一个免费、开源的编译器，支持多个平台，包括 Linux、macOS 和 Windows（通过 MinGW）。GCC 是 GNU 项目的核心组件，广泛应用于 Unix 和类 Unix 平台（如 Linux）。

- clang：一个基于 LLVM 的轻量级 C++ 编译器，支持多个平台，包括 Linux、macOS 和 Windows。

以上编译器都可以在命令行使用，CMake 本质上只是选择了某个编译器、指定了编译对象和编译选项，随后用相应的编译器进行编译。我们在文档中已经介绍了 msvc 和 gcc 如何安装；我们简单介绍一下 Clang 怎么安装。

> 特别地，对于 msvc 编译器需要用特殊的命令行；在任务栏中搜索“x64 Native Tools Command Prompt for VS”（一般输入 x64 Native 就够了），即可打开已经为 msvc 初始化好的命令行（普通的命令行不能直接用 msvc 编译器）。随后输入`cl /EHsc 代码文件 /Fe可执行文件保存路径`即可，例如`cl /EHsc a.cpp /Fetest`，即会生成`test.exe`。你可以看[微软的官方文档](https://learn.microsoft.com/en-us/cpp/build/reference/compiler-options-listed-by-category)或通过`cl -help`来了解更多的编译器选项，**不过一般情况下不建议直接在命令行使用 msvc 编译器**。

## MacOS

Apple 官方提供了一个名为`xcode-select`的工具来安装 clang 编译器等开发工具，你只需要在你的 mac 电脑中打开终端，运行以下命令，然后根据提示就可以安装。

```
xcode-select --install
```

但值得注意的是，这种方法安装的实际上是 apple clang，即 Clang 的一个改装版本，不开源也通常比不上上面三个编译器。

## Windows

### 通过 VS 安装

Visual Studio 允许以组件形式集成 LLVM Clang，在安装时（或者从 Visual Studio Installer 选择“修改”）点击“单个组件”，搜索`clang`：

<img src="..//assets/Visual Studio - clang.png" alt="image-20240219161338702" style="zoom:80%;" />

勾选并安装即可。随后就可以在`VS安装位置\VC\Tools\Llvm\x64\bin`中找到 clang 编译器。

### 直接安装

你可以在[Release LLVM 17.0.6 · llvm/llvm-project (github.com)](https://github.com/llvm/llvm-project/releases/tag/llvmorg-17.0.6)（如果无法访问 github，可以使用前面 hub nuaa cf 的镜像）找到`...win64.exe`并进行安装。在`安装路径\bin`中就可以找到相应的编译器。

如果你想在命令行中使用，可以`路径\clang++ 源文件 -std=c++20 -o 可执行文件.exe`，与 gcc 十分类似。不过我们还是建议你使用 VSCode 等编辑器来配合 Clang 编译器。你可能需要在环境变量中加入该路径（在任务栏搜索“编辑系统环境变量”，点击下方“环境变量”，在用户变量或系统变量的`Path`变量处添加上该路径即可），以使得 CMake 等构建工具更方便地查找到 LLVM 的工具链。